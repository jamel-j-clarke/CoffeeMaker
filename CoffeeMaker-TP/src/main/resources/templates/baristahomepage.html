<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Barista Home</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/bootstrap.css" />
<link rel="stylesheet" href="css/app.css" />
<link rel="icon" type="image/png" href="images/favicon-1.png"/>
	<style>
		th, table {
			margin-right: 20px;
			margin-left: 20px;
		}
	</style>
</head>
<body>
	<div layout:fragment="content">
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.js"></script>
		<script>
			/*<![CDATA[*/
			var app = angular.module('myApp', []);
			app.controller('populateCtrl', function($scope, $http, $q) {
				$scope.signout = function(){  
					// update later to signout user of system instead of clearing
					window.location.href = "/index";
				}
				
				$http.get("/api/v1/orders").then(function(response) {
					$scope.orders = response.data;
				});
			});
			/*]]>*/
		</script>
		<div ng-app="myApp" ng-controller="populateCtrl">
			<button class="signout" onclick="toggle()">Sign Out</button>
			<div class="holder" id="blur">
				<div>
					<header>Barista Homepage</header>
				</div>
				<form ng-submit="submit()" name="baristaHomepageForm">
					<!-- current orders table -->
					<div class="table-header">Current Orders:</div>	
					<div class="button-group">
							<table>
								<colgroup>
									<col style="width: 200px"/>
									<col style="width: 550px"/>
									<col style="width: 250px"/>
									<col style="width: 200px"/>
								</colgroup>
								<tr>
									<th>Order #</th>
									<th>Recipe Info</th>
									<th>Status</th>
									<th>Completed</th>
								</tr>
									<tr ng-repeat="order in orders">
										<td>{{order.id}}</td>
										<td>{{order.beverage.name}}</td>
										<td>button to be implemented</td>
										<td>
											<label> 
												<input type="radio" name="name" ng-model="$parent.completed" value="{{order.completed}}">
											</label>
										</td>
									</tr>
							</table>
								<button ng-click="cancel()" ng-disabled="baristaHomepageForm.$pristine" 
									class="button-side" style="	width: 215px; height: 50px;">Complete Order</button>
					</div>
					<br>
					<br>
					<!-- all orders table -->
					<div class="table-header">All Orders:</div>	
					<div class="button-group">
							<table>
								<colgroup>
									<col style="width: 200px"/>
									<col style="width: 550px"/>
									<col style="width: 250px"/>
									<col style="width: 200px"/>
								</colgroup>
								<tr>
									<th>Fulfill</th>
									<th>Order #</th>
									<th>Recipe Info</th>
									<th>Status</th>
								</tr>
									<tr ng-repeat="order in orders">
										<td>
											<label> 
												<input type="radio" name="name" ng-model="$parent.completed" value="{{order.completed}}">
											</label>
										</td>
										<td>{{order.id}}</td>
										<td>{{order.beverage.name}}</td>
										<td>button to be implementedp for status</td>
									</tr>
							</table>
							<button ng-click="cancel()" ng-disabled="baristaHomepageForm.$pristine" 
								class="button-side" style="	width: 215px; height: 50px;">Fulfill Order</button>
					</div>
					</form>
					</div>
			</div>
			<!-- sign out popup -->
			<div class="holder" id="signoutPopup">
				<p>Are you sure you would like to sign out?</p>
				<br>
				<popupButton href="/stafflogin" onclick="goToLogin()">Sign Out</popupButton>
				<popupButton href="#" onclick="toggle()">Cancel</popupButton>
			</div>
			<!-- end of sign out popup -->
			
			<script type="text/javascript">
				// make signout popup appear function
				function toggle() {
					var blur = document.getElementById('blur');
					blur.classList.toggle('active');
					var signoutPopup = document.getElementById('signoutPopup');
					signoutPopup.classList.toggle('active');
				}
				
				// go to login page function
				function goToLogin() {
					window.location.href = "/stafflogin";
				}
			</script>
		</div>
</body>
</html>
