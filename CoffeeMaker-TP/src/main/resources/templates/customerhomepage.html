<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Customer Home</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
    <style>
        body {
			background-color: rgb(207, 176, 145);
		}
		@font-face {
  			font-family: 'Raleway', sans-serif;
  			src: url("https://fonts.googleapis.com/css2?family=Raleway&display=swap");
		}
        header {
			font-size: 56px;
		}
		a, button {
			border-radius: 10px;
			border: 2px solid #000000;
			text-align: center;
			text-decoration: none;
			color: black;
			padding: 10px;
			font-size: 36px;
			width: 275px;
			white-space: normal;
		}
		holder {
       		text-align: center;
			vertical-align: middle;
			font-size: 18px;
		}
		div {
	        margin-bottom: 10px;
			vertical-align: middle;
			font-size: 30px;
			padding: 2px;
      	}
		th, table {
			margin-right: auto;
			border: 2px solid black;
 			border-collapse: collapse;
 			padding: 15px;
		}
		* {
			font-family: raleway;
		}
    </style>
</head>
<body>
	<div layout:fragment="content">
		<script	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.js"></script>
		<script>
			/* Without these comments, Thymeleaf will try to parse the Javascript as XML and break itself sometimes */
			/*]]>*/
			var app = angular.module('myApp', []);
			app.controller('populateCtrl', function($scope, $http, $q) {
				
				// log the hit
				console.log("Hit!");
				
				// get the current customer's name
				$scope.name = sessionStorage.getItem("currentUserName");
				console.log($scope.name);
				
				// trigger sign out popup
				$scope.toggle = function() {
					var blur = document.getElementById('blur'); 
					blur.classList.toggle('active');
					var popup = document.getElementById('popup'); 
					popup.classList.toggle('active');
				}
				
				$scope.reset = function() {
					// clear the fields of customer
					$scope.customer = {
						email: '',
						name: '',
						password: ''
					};
					
					$scope.name = ' ';
					
					// clear the form
					if (undefined != $scope.customerHomepageForm) {
						$scope.customerHomepageForm.$setPristine();
					}
				}
				
				$scope.signout = function(){  
					// update later to signout user of system instead of clearing
					$scope.reset();	
					window.location.href = "/index";
				}
			});
			/* Without these comments, Thymeleaf will try to parse the Javascript as XML and break itself sometimes */
			/*]]>*/
		</script>
		<div ng-app="myApp" ng-controller="populateCtrl">
			<!--- Various HTML elements, with extra tags telling Angular how to work with them, go here -->
			<div class="holder" id="blur">
				<form ng-submit="submit()" name="customerHomepageForm">
				<div>
					<header>Hey {{name}},</header>
				</div>
				<input type="submit" class="a" style="position: absolute; top: 15px; right: 15px;" value="Signout"  ng-click="signout()"/>
				<br>
				<div>
					Current Orders:
					<table>
						<colgroup>
							<col style="width: 200px"/>
							<col style="width: 550px"/>
							<col style="width: 250px"/>
						</colgroup>
						<tr>
							<th>Order #:</th>
							<th>Drink:</th>
							<th>Status:</th>
						</tr>
					</table>
				</div>
				</form>
				<button style="position: absolute; bottom: 8px; right: 8px;">Order Beverage</button>
			</div>
		</div>
	</div>
</body>
</html>